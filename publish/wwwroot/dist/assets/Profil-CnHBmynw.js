import{_ as f,c as l,o,a as s,d as i,t as a,b as y,j as c,b0 as m,F as h,r as p,e as u}from"./index-DfLkNCfm.js";const T={name:"Profil",data(){return{user:null,entegrasyonlar:[],editEntegrasyonTelefon:"",entegrasyonTelefonLoading:!1,entegrasyonTelefonSuccess:!1,entegrasyonTelefonError:""}},async mounted(){const r=localStorage.getItem("kullanici_id");if(r){try{const e=await u.get(`http://localhost:5079/api/users/${r}`);this.user=e.data,this.editEntegrasyonTelefon=e.data.entegrasyon_Telefon||""}catch{this.user=null}try{const e=await u.get(`http://localhost:5079/api/entegrasyonlar/by-user/${r}`);Array.isArray(e.data)?this.entegrasyonlar=e.data:e.data&&(this.entegrasyonlar=[e.data])}catch{this.entegrasyonlar=[]}}},methods:{async updateEntegrasyonTelefon(){this.entegrasyonTelefonLoading=!0,this.entegrasyonTelefonSuccess=!1,this.entegrasyonTelefonError="";const r=localStorage.getItem("kullanici_id");try{let e;this.user.roller&&this.user.roller.length>0&&this.user.roller[0].rolId&&(e=this.user.roller[0].rolId);const d={ad:this.user.ad,email:this.user.email,telefon:this.user.telefon,entegrasyon_Telefon:this.editEntegrasyonTelefon,telegramUseSamePhone:!0};e&&(d.rolId=e),await u.put(`http://localhost:5079/api/users/${r}`,d),this.entegrasyonTelefonSuccess=!0,this.user.entegrasyon_Telefon=this.editEntegrasyonTelefon}catch{this.entegrasyonTelefonError="Güncelleme başarısız."}finally{this.entegrasyonTelefonLoading=!1,setTimeout(()=>{this.entegrasyonTelefonSuccess=!1},2e3)}}}},_={class:"container py-4"},b={key:0,class:"card mb-4 p-3"},E={class:"list-group list-group-flush"},k={class:"list-group-item"},v={class:"list-group-item"},x={class:"list-group-item"},S={class:"list-group-item"},I={class:"d-flex align-items-center"},w=["disabled"],A={key:0,class:"text-success mt-1"},K={key:1,class:"text-danger mt-1"},L={key:1,class:"alert alert-warning"},P={class:"card p-3"},B={key:0},V={class:"list-group list-group-flush"},N={key:1,class:"alert alert-info"};function C(r,e,d,D,t,g){return o(),l("div",_,[e[9]||(e[9]=s("h2",{class:"mb-4"},"Profilim",-1)),t.user?(o(),l("div",b,[e[7]||(e[7]=s("h5",{class:"mb-3"},"Kullanıcı Bilgileri",-1)),s("ul",E,[s("li",k,[e[2]||(e[2]=s("b",null,"Ad:",-1)),i(" "+a(t.user.ad),1)]),s("li",v,[e[3]||(e[3]=s("b",null,"Email:",-1)),i(" "+a(t.user.email),1)]),s("li",x,[e[4]||(e[4]=s("b",null,"Telefon:",-1)),i(" "+a(t.user.telefon),1)]),s("li",S,[e[5]||(e[5]=s("b",null,"Entegrasyon Telefon:",-1)),s("div",I,[c(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>t.editEntegrasyonTelefon=n),class:"form-control me-2",style:{"max-width":"200px"}},null,512),[[m,t.editEntegrasyonTelefon]]),s("button",{class:"btn btn-primary btn-sm",onClick:e[1]||(e[1]=(...n)=>g.updateEntegrasyonTelefon&&g.updateEntegrasyonTelefon(...n)),disabled:t.entegrasyonTelefonLoading}," Kaydet ",8,w)]),t.entegrasyonTelefonSuccess?(o(),l("div",A,"Güncellendi!")):y("",!0),t.entegrasyonTelefonError?(o(),l("div",K,a(t.entegrasyonTelefonError),1)):y("",!0),e[6]||(e[6]=s("small",{class:"text-muted"},"Sipariş ve Telegram entegrasyonunda kullanılacak telefon.",-1))])])])):(o(),l("div",L,"Kullanıcı bilgisi yükleniyor...")),s("div",P,[e[8]||(e[8]=s("h5",{class:"mb-3"},"Entegrasyonlarım",-1)),t.entegrasyonlar&&t.entegrasyonlar.length?(o(),l("div",B,[s("ul",V,[(o(!0),l(h,null,p(t.entegrasyonlar,n=>(o(),l("li",{key:n.id,class:"list-group-item"},[s("b",null,a(n.platformAdi||n.platform_Adi||"Platform")+":",1),i(" "+a(n.entegrasyonKodu||n.entegrasyon_Kodu||n.id),1)]))),128))])])):(o(),l("div",N,"Entegrasyon bulunamadı."))])])}const G=f(T,[["render",C],["__scopeId","data-v-08d3293b"]]);export{G as default};
